{% load humanize %}{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ car.brand }} {{ car.model }} - D√©tails</title>
    <link rel="icon" type="image/png" href="{% static 'images/logo.png' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: #f4f6f9;
        }
        .img-zoom {
            transition: transform .4s ease;
        }
        .img-zoom:hover {
            transform: scale(1.04);
        }
        .car-image-card {
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.08);
            padding: 20px;
        }
        .price-box {
            background: linear-gradient(135deg, #007aff, #005ecb);
            color: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 15px 30px rgba(0,122,255,.35);
        }
        .info-card {
            border-radius: 14px;
            background: #ffffff;
            box-shadow: 0 10px 25px rgba(0,0,0,0.06);
        }
        .border-dashed {
            border: 2px dashed #ffc107;
            border-radius: 14px;
        }
    </style>
</head>

<body>

<div class="container mt-5 mb-5">

    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb small">
            <li class="breadcrumb-item"><a href="/">Accueil</a></li>
            <li class="breadcrumb-item active">{{ car.brand }}</li>
        </ol>
    </nav>

    <!-- Retour -->
    <a href="javascript:history.back()" class="btn btn-outline-secondary mb-4">
        ‚Üê Retour
    </a>

    <!-- IMAGE -->
    <div class="car-image-card text-center mb-5">
        {% if car.image %}
            <img src="{{ car.image.url }}"
                 class="img-fluid img-zoom"
                 style="max-height: 480px; object-fit: contain;"
                 alt="{{ car.brand }}">
        {% else %}
            <div class="py-5 text-muted">Aucune image disponible</div>
        {% endif %}
    </div>

    <!-- CONTENU -->
    <div class="row g-5">
        <!-- Description -->
        <div class="col-md-8">
            <div class="info-card p-4 p-md-5">
                <h1 class="fw-bold text-uppercase mb-1">{{ car.brand }} {{ car.model }}</h1>
                <p class="text-muted">R√©f√©rence : #AUT-{{ car.id|stringformat:"04d" }}</p>

                <hr class="my-4">

                <h4 class="fw-bold mb-3">Description du v√©hicule</h4>
                <p class="text-secondary" style="font-size: 1.1rem; line-height: 1.8;">
                    {{ car.description|default:"Aucune description d√©taill√©e fournie pour ce v√©hicule." }}
                </p>
            </div>
        </div>

        <!-- Colonne droite -->
        <div class="col-md-4">

            <!-- PRIX -->
            <div class="price-box mb-4 text-center">
                <h2 class="fw-bold mb-0">
                    {{ car.price|intcomma }}
                    <small style="font-size: 0.6em;">FCFA</small>
                </h2>
            </div>

            <!-- INFOS -->
            <div class="info-card p-4 mb-4">
                <ul class="list-unstyled mb-0">
                    <li class="mb-2"><strong>Ann√©e :</strong> {{ car.year }}</li>
                    <li class="mb-2"><strong>Kilom√©trage :</strong> {{ car.kilometrage|intcomma }} km</li>
                    <li class="mb-2"><strong>Ville :</strong> {{ car.ville|default:"Douala" }}</li>
                    <li><strong>Statut :</strong>
                        <span class="badge bg-success px-3 py-2">Disponible</span>
                    </li>
                </ul>
            </div>

            <!-- ACTIONS -->
           {% if user.is_authenticated %}
                <a href="{% url 'appointment_create' car.id %}"
                  class="btn btn-primary btn-lg w-100 shadow">
                    üìÖ Prendre un rendez-vous
                </a>
            {% else %}

                <div class="alert alert-warning text-center border-dashed">
                    <h6 class="fw-bold">Int√©ress√© ?</h6>
                    <p class="small mb-3">Les coordonn√©es du vendeur sont r√©serv√©es aux membres.</p>
                    <a href="{% url 'login' %}" class="btn btn-primary w-100">Se connecter</a>
                    <small class="d-block mt-2">
                        Nouveau ?
                        <a href="{% url 'register' %}" class="text-decoration-none fw-bold">
                            S'inscrire
                        </a>
                    </small>
                </div>
            {% endif %}
        </div>
    </div>
</div>

</body>
</html>
